<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><title>Tutorial: Todos</title><link rel="stylesheet" href="vendor/stylesheets/bootstrap.min.css"><link rel="stylesheet" href="stylesheets/layout.css"><link rel="stylesheet" href="stylesheets/layout_components.css"><script type="application/javascript" src="vendor/javascripts/jquery-1.7.2.js"></script><link rel="stylesheet" href="stylesheets/tutorial.css"><script type="application/javascript" src="vendor/javascripts/knockout-2.1.0.debug.js"></script><script type="application/javascript" src="vendor/javascripts/underscore-1.3.1.js"></script><script type="application/javascript" src="vendor/javascripts/backbone-0.9.2.js"></script><script type="application/javascript" src="vendor/javascripts/knockback-0.15.1.js"></script><link rel="stylesheet" href="vendor/lib/highlight/highlightjs/stylesheets/dark.css"><script type="application/javascript" src="vendor/lib/highlight/highlightjs/highlight.js"></script><script type="application/javascript" src="vendor/lib/highlight/highlightjs/languages/javascript.js"></script><script type="application/javascript" src="vendor/lib/highlight/highlight-coffee.js"></script><script type="application/javascript" src="vendor/javascripts/bootstrap.js"></script><script type="application/javascript" src="javascripts/interface.js"></script><script type="application/javascript">hljs.tabReplace = '  ';
hljs.initHighlightingOnLoad();</script></head><body><div id="wrap"><div class="page navbar"><div class="navbar page"><div class="navbar-inner"><div class="container"><a class="brand kb">Knockback.js</a><ul class="nav"><li><a href="index.html">Home</a></li><li class="active"><a href="tutorial_getting_started.html">Getting Started</a></li><li><a href="docs.html">Docs</a></li><li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Tutorials<b class="caret"></b></a><ul class="dropdown-menu"><li></li><a href="tutorial_getting_started.html">Getting Started</a><a href="tutorial_kb_view_model.html">kb.ViewModel</a><a href="tutorial_kb_localized_observable.html">kb.LocalizedObservable</a><a href="tutorial_relational_models.html">Relational Models</a><a href="tutorial_locale_manager.html">Custom Locale Manager</a><a href="tutorial_todos_app.html">Todos App</a></ul></li><li><a href="release_notes.html">Release Notes</a></li></ul><div id="script_language"><div class="separator"><div class="selection codestyle"><div class="option"><input id="cs-cs" type="radio" name="codestyle" value="cs" class="auto"/><label for="cs-cs">CoffeeScript</label></div><div class="option"><input id="cs-js" type="radio" name="codestyle" value="js"/><label for="cs-js">Javascript</label></div></div></div></div></div></div></div></div></div><div id="wrap"><div class="page container"><header class="page"></header><content class="page"><section><h1>Tutorial: Getting Started with Knockback.js</h1><div><span>In essence, </span><a href="index.html">Knockback.js</a><span> bridges the dynamic DOM bindings of </span><a href="http://knockoutjs.com/">Knockout.js</a><span> with the models, computeds, and routers of </span><a href="http://documentcloud.github.com/backbone/">Backbone.js</a><span>. Well, it also brings some other cool features like localization, default values, and nested view models.</span></div><p></p><h2>Useful Resources</h2><div>Before you start with Knockback.js, we recommend you first get acquainted with Backbone.js and Knockout.js by reviewing their websites (above) and this information:</div><p><ul><li><a href="http://documentcloud.github.com/backbone/docs/todos.html">Documentation of Backbone.js Todos app</a><span> (but skip the section on views)</span></li><li><a href="http://knockoutjs.com/examples/">Live examples of Knockout.js</a></li><li><a href="http://channel9.msdn.com/Events/MIX/MIX11/FRM08">Excellent video walking through Knockout.js</a></li></ul></p><span>Also take a look at this </span><a href="index.html#comparison_table">comparison table</a><span> between the libraries or this </span><a href="http://www.geekdave.com/?p=79">blog entry</a><p></p><h2>Minimal Study</h2><h3>Knockout.js</h3><p><span>Knockout follows the </span><a href="http://en.wikipedia.org/wiki/Model_View_ViewModel">Model_View_ViewModel (MVVM)</a><span> design pattern meaning you specify a ViewModel (Controller) in addition to your data (Model) which encapsulates specific data and logic for your HTML/Template (View).</span></p><div class="container-fluid"><div class="row-fluid"><div class="span8"><h4>View (HTML):</h4><pre>&lt;div id='ko_basic'&gt;
  &lt;p&gt;First name: &lt;input data-bind=&quot;value: first_name&quot; /&gt;&lt;/p&gt;
  &lt;p&gt;Last name: &lt;input data-bind=&quot;value: last_name&quot; /&gt;&lt;/p&gt;
  &lt;p&gt;Hello, &lt;span data-bind=&quot;text: full_name&quot;&gt; &lt;/span&gt;!&lt;/p&gt;
&lt;/div&gt;
</pre><h4>ViewModel and Bindings:</h4><pre data-for="cs">model = {first_name: "Planet", last_name: "Earth"}

ViewModel = (model) ->
  @first_name = ko.observable(model.first_name)
  @last_name = ko.observable(model.last_name)
  @full_name = ko.computed((->return "#{this.first_name()} #{this.last_name()}"), @)
  @
view_model = new ViewModel(model)

ko.applyBindings(view_model, $('#ko_basic')[0])</pre><pre data-for="js">// Generated by CoffeeScript 1.3.1
var ViewModel, model, view_model;

model = {
  first_name: "Planet",
  last_name: "Earth"
};

ViewModel = function(model) {
  this.first_name = ko.observable(model.first_name);
  this.last_name = ko.observable(model.last_name);
  this.full_name = ko.computed((function() {
    return "" + (this.first_name()) + " " + (this.last_name());
  }), this);
  return this;
};

view_model = new ViewModel(model);

ko.applyBindings(view_model, $('#ko_basic')[0]);
</pre></div><div class="span4"><h4>Live Result</h4><div class="demos_result_box"><div id='ko_basic'>
  <p>First name: <input data-bind="value: first_name" /></p>
  <p>Last name: <input data-bind="value: last_name" /></p>
  <p>Hello, <span data-bind="text: full_name"> </span>!</p>
</div>
<script type="application/javascript" src="tutorials/getting_started/ko_basic.js"></script></div></div></div></div><strong>Note:</strong><span> ViewModels need to be unique instances so Knockout uses a simple function with new to create an instance. Here are some equivalents:</span><pre data-for="cs"># Form 1: Simple function-based class
ViewModel = (model) -&gt;
  @first_name = ko.observable(model.first_name)
  @ # note: need to return this/@ since CoffeeScript returns the last argument automatically (which is not what we want)
  
view_model = new ViewModel({first_name: &quot;Hello&quot;})

# Form 2: CoffeeScript class (allows for inheritance)
class ViewModel
  constructor: (mode) -&gt;
    @first_name = ko.observable(model.first_name)
    
view_model = new ViewModel({first_name: &quot;Hello&quot;})
</pre><pre data-for="js">// Simple function-based class
var ViewModel = function(model) {
  this.first_name = ko.observable(model.first_name);
};

var view_model = new ViewModel({first_name: &quot;Hello&quot;});
</pre><p></p><h3>Backbone.js</h3><p><span>Backbone is an amazing </span><a href="http://en.wikipedia.org/wiki/Model_view_controller">Model_View_Controller (MVC)</a><span> - </span><a href="http://documentcloud.github.com/backbone/#FAQ-mvc">inspired</a><span> library that handles data (Model/Collection) synchronization with a RESTful server for </span><a href="http://en.wikipedia.org/wiki/Object-relational_mapping ">Object_Relational_Mapping (ORM)</a><span>, page routing, etc. Unfortunately, their Views becomecomplex to maintain when dynamic Model and View synchronization is required (which is why Knockback exists).</span></p><div>These are the basic Model components from Backbone used by Knockback:</div><pre data-for="cs">// Model
earth = new Backbone.Model({first_name: 'Planet', last_name: 'Earth'})
mars = new Backbone.Model({first_name: 'Planet', last_name: 'Mars'})

// Collection
planets = new Backbone.Collection([earth, mars])
</pre><pre data-for="js">// Model
var earth = new Backbone.Model({first_name: 'Planet', last_name: 'Earth'});
var mars = new Backbone.Model({first_name: 'Planet', last_name: 'Mars'});

// Collection
var planets = new Backbone.Collection([earth, mars]);
</pre><div>This is a Backbone router that can be used by your app:</div><p>Router:</p><pre data-for="cs">class PageRouter extends Backbone.Router
  routes:
    &quot;earth&quot;:    &quot;switchToEarth&quot;     // #earth
    &quot;mars&quot;:     &quot;switchToMars&quot;      // #mars
    
  switchToEarth: -&gt; # do something
  switchToMars: -&gt; # do something
  
# instantiate the router and start listening for URL changes
page_router = new PageRouter()
Backbone.history.start()
</pre><pre data-for="js">var PageRouter = Backbone.Router.extend({
  routes: {
    &quot;earth&quot;:    &quot;switchToEarth&quot;,     // #earth
    &quot;mars&quot;:     &quot;switchToMars&quot;      // #mars
  },
  
  switchToEarth: function() { /* do something */ },
  switchToMars: function() { /* do something */ }
});

// instantiate the router and start listening for URL changes
var page_router = new PageRouter()
Backbone.history.start()
</pre><p></p><h3>Knockback.js</h3><p>You can use Knockback to bind Backbone Models/Collections to your HTML/templates (View) using Knockout. This allows server or application changes to Models/Collections to be propagated automatically to your views using `Backbone.sync`</p><h4>Using with a Backbone.Model</h4><p>Creating a ko.observable() for each model attribute by hand:</p><div class="container-fluid"><div class="row-fluid"><div class="span8"><h4>View (HTML):</h4><pre>&lt;div id='kb_observable'&gt;
  &lt;p&gt;First name: &lt;input data-bind=&quot;value: first_name&quot; /&gt;&lt;/p&gt;
  &lt;p&gt;Last name: &lt;input data-bind=&quot;value: last_name&quot; /&gt;&lt;/p&gt;
  &lt;p&gt;Hello, &lt;span data-bind=&quot;text: full_name&quot;&gt; &lt;/span&gt;!&lt;/p&gt;
&lt;/div&gt;
</pre><h4>ViewModel and Bindings:</h4><pre data-for="cs">model = new Backbone.Model({first_name: "Planet", last_name: "Earth"})

ViewModel = (model) ->
  @first_name = kb.observable(model, 'first_name')
  @last_name = kb.observable(model, 'first_name')
  @full_name = ko.computed((->return "#{this.first_name()} #{this.last_name()}"), @)
  @
view_model = new ViewModel(model)

ko.applyBindings(view_model, $('#kb_observable')[0])</pre><pre data-for="js">// Generated by CoffeeScript 1.3.1
var ViewModel, model, view_model;

model = new Backbone.Model({
  first_name: "Planet",
  last_name: "Earth"
});

ViewModel = function(model) {
  this.first_name = kb.observable(model, 'first_name');
  this.last_name = kb.observable(model, 'first_name');
  this.full_name = ko.computed((function() {
    return "" + (this.first_name()) + " " + (this.last_name());
  }), this);
  return this;
};

view_model = new ViewModel(model);

ko.applyBindings(view_model, $('#kb_observable')[0]);
</pre></div><div class="span4"><h4>Live Result</h4><div class="demos_result_box"><div id='kb_observable'>
  <p>First name: <input data-bind="value: first_name" /></p>
  <p>Last name: <input data-bind="value: last_name" /></p>
  <p>Hello, <span data-bind="text: full_name"> </span>!</p>
</div>
<script type="application/javascript" src="tutorials/getting_started/kb_observable.js"></script></div></div></div></div><p id="view_model_no_inheritance">Creating a ko.observable() automatically for each model attribute:</p><div class="container-fluid"><div class="row-fluid"><div class="span8"><h4>View (HTML):</h4><pre>&lt;div id='kb_view_model_computed'&gt;
  &lt;p&gt;First name: &lt;input data-bind=&quot;value: first_name&quot; /&gt;&lt;/p&gt;
  &lt;p&gt;Last name: &lt;input data-bind=&quot;value: last_name&quot; /&gt;&lt;/p&gt;
  &lt;p&gt;Hello, &lt;span data-bind=&quot;text: full_name&quot;&gt; &lt;/span&gt;!&lt;/p&gt;
&lt;/div&gt;</pre><h4>Models, Collection, ViewModel, and Bindings:</h4><pre data-for="cs">model = new Backbone.Model({first_name: "Planet", last_name: "Earth"})

view_model = kb.viewModel(model)
view_model.full_name = ko.computed((->return "#{@first_name()} #{@last_name()}"), view_model)

ko.applyBindings(view_model, $('#kb_view_model_computed')[0])</pre><pre data-for="js">// Generated by CoffeeScript 1.3.1
var model, view_model;

model = new Backbone.Model({
  first_name: "Planet",
  last_name: "Earth"
});

view_model = kb.viewModel(model);

view_model.full_name = ko.computed((function() {
  return "" + (this.first_name()) + " " + (this.last_name());
}), view_model);

ko.applyBindings(view_model, $('#kb_view_model_computed')[0]);
</pre></div><div class="span4"><h4>Live Result</h4><div class="demos_result_box"><div id='kb_view_model_computed'>
  <p>First name: <input data-bind="value: first_name" /></p>
  <p>Last name: <input data-bind="value: last_name" /></p>
  <p>Hello, <span data-bind="text: full_name"> </span>!</p>
</div><script type="application/javascript" src="tutorials/getting_started/kb_view_model_computed.js"></script></div></div></div></div><h4>Using with a Backbone.Collection</h4><p>Create a kb.ViewModel automatically for each model in a collection:</p><div class="container-fluid"><div class="row-fluid"><div class="span8"><h4>View (HTML):</h4><pre>&lt;div id='kb_collection' data-bind=&quot;foreach: planets&quot;&gt;
  &lt;p&gt;First name: &lt;input data-bind=&quot;value: first_name&quot; /&gt;&lt;/p&gt;
  &lt;p&gt;Last name: &lt;input data-bind=&quot;value: last_name&quot; /&gt;&lt;/p&gt;
  &lt;p&gt;Hello, &lt;span data-bind=&quot;text: ko.computed(function(){ return $data.first_name() + ' ' + $data.last_name(); })&quot;&gt; &lt;/span&gt;!&lt;/p&gt;
&lt;/div&gt;</pre><h4>Models, Collection, ViewModel, and Bindings:</h4><pre data-for="cs">earth = new Backbone.Model({first_name: 'Planet', last_name: 'Earth'})
mars = new Backbone.Model({first_name: 'Planet', last_name: 'Mars'})
the_moon = new Backbone.Model({first_name: 'The', last_name: 'Moon'})

planets = new Backbone.Collection([earth, the_moon, mars])

view_model =
  planets: kb.collectionObservable(planets, {view_model: kb.ViewModel})

ko.applyBindings(view_model, $('#kb_collection')[0])</pre><pre data-for="js">// Generated by CoffeeScript 1.3.1
var earth, mars, planets, the_moon, view_model;

earth = new Backbone.Model({
  first_name: 'Planet',
  last_name: 'Earth'
});

mars = new Backbone.Model({
  first_name: 'Planet',
  last_name: 'Mars'
});

the_moon = new Backbone.Model({
  first_name: 'The',
  last_name: 'Moon'
});

planets = new Backbone.Collection([earth, the_moon, mars]);

view_model = {
  planets: kb.collectionObservable(planets, {
    view_model: kb.ViewModel
  })
};

ko.applyBindings(view_model, $('#kb_collection')[0]);
</pre></div><div class="span4"><h4>Live Result</h4><div class="demos_result_box"><div id='kb_collection' data-bind="foreach: planets">
  <p>First name: <input data-bind="value: first_name" /></p>
  <p>Last name: <input data-bind="value: last_name" /></p>
  <p>Hello, <span data-bind="text: ko.computed(function(){ return $data.first_name() + ' ' + $data.last_name(); })"> </span>!</p>
</div><script type="application/javascript" src="tutorials/getting_started/kb_collection.js"></script></div></div></div></div><p></p><h2>Inheritance</h2><p>Some Knockback classes are meant to be inherited. Specifically:</p><ul><li><a href="docs_kb_view_model.html">kb.ViewModel</a></li><li><a href="docs_kb_localized_observable.html">kb.LocalizedObservable</a></li><li><a href="docs_kb_ref_countable.html">kb.RefCountable</a></li></ul><span>Re-wrtting the </span><a href="#view_model_no_inheritance">above kb.viewModel example</a><span>:</span><div class="container-fluid"><div class="row-fluid"><div class="span8"><h4>View (HTML):</h4><pre>&lt;div id='kb_view_model_inheritance'&gt;
  &lt;p&gt;First name: &lt;input data-bind=&quot;value: first_name&quot; /&gt;&lt;/p&gt;
  &lt;p&gt;Last name: &lt;input data-bind=&quot;value: last_name&quot; /&gt;&lt;/p&gt;
  &lt;p&gt;Hello, &lt;span data-bind=&quot;text: full_name&quot;&gt; &lt;/span&gt;!&lt;/p&gt;
&lt;/div&gt;</pre><h4>ViewModel and Bindings:</h4><pre data-for="cs">model = new Backbone.Model({first_name: "Planet", last_name: "Earth"})

class ViewModel extends kb.ViewModel
  constructor: (model) ->
    super
    @full_name = ko.computed((->return "#{@first_name()} #{@last_name()}"), @)
view_model = new ViewModel(model)

ko.applyBindings(view_model, $('#kb_view_model_inheritance')[0])</pre><pre data-for="js">var model = new Backbone.Model({
  first_name: "Planet",
  last_name: "Earth"
});

var ViewModel = kb.ViewModel.extend({
  constructor: function(model) {
    ViewModel.__super__.constructor.apply(this, arguments);
    this.full_name = ko.computed((function() {
      return "" + (this.first_name()) + " " + (this.last_name());
    }), this);
  }
});

var view_model = new ViewModel(model);

ko.applyBindings(view_model, $('#kb_view_model_inheritance')[0]);
</pre></div><div class="span4"><h4>Live Result</h4><div class="demos_result_box"><div id='kb_view_model_inheritance'>
  <p>First name: <input data-bind="value: first_name" /></p>
  <p>Last name: <input data-bind="value: last_name" /></p>
  <p>Hello, <span data-bind="text: full_name"> </span>!</p>
</div><script type="application/javascript" src="tutorials/getting_started/kb_view_model_inheritance.js"></script></div></div></div></div><p></p><h2>Classes vs Factory Functions</h2><p>You may have noticed that there is both kb.viewModel(model, options) and kb.ViewModel. The reason is that to reduce the need of using `new` and to be more familiar with Knockout, there are factory methods that create the underlying classes.</p><p>A factory function uses new to create a new instance:</p><pre data-for="cs">Knockback.viewModel = (model, options) -&gt; return new Knockback.ViewModel(model, options)
</pre><pre data-for="js">Knockback.viewModel = function(model, options) { return new Knockback.ViewModel(model, options); };</pre><div class="alert alert-error"><span>Be careful to differentiate the </span><span class="label label-info">factory</span><span> from the class when using </span><a href="docs.htm#utils_observable_instance_of">kb.utils.observableInstanceOf(observable, class)</a></div></section></content><footer class="page"></footer></div></div></body></html>